<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.baomidou.springwind.mapper.IdleInfoMapper">

	<!-- 通用查询映射结果 -->
	<resultMap id="BaseResultMap" type="com.baomidou.springwind.entity.IdleInfo">
		<id column="info_id" property="infoId" />
		<result column="classify_id" property="classifyId" />
		<result column="idel_info" property="idelInfo" />
		<result column="destory_info" property="destoryInfo" />
		<result column="deposit" property="deposit" />
		<result column="retal" property="retal" />
		<result column="retal_type" property="retalType" />
		<result column="status" property="status" />
		<result column="create_date" property="createDate" />
		<result column="end_date" property="endDate" />
		<result column="user_id" property="userId" />
	</resultMap>

	<select id="selectByPage" resultMap="BaseResultMap" parameterType="com.baomidou.springwind.entity.IdleInfoExtend">
		select idle.*
		from idle_info idle
		left join classify on (idle.classify_id = classify.classify_id)
		<where>
			<if test="search != null">
				title like "%"#{search}"%" or idel_info like "%"#{search}"%" or classify.classify_name like "%"#{search}"%"
			</if>
		</where>
		limit #{start},#{pageSize}
	</select>
</mapper>
